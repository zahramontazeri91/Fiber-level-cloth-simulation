<?xml version='1.0' encoding='utf-8'?>

<scene version="0.4.4">
    <integrator type="volpath">
        <integer name="maxDepth" value="25"/>
        <integer name="rrDepth" value="30"/>
    </integrator>

    <shape type="shapegroup" id="horizontal">
        <shape type="hair">

            <string name="filename" value="$fn"/>
            
            <float name="radius" value="0.002"/>             
            <float name="angleThreshold" value="0.001"/>

            <bsdf type="roughplastic">
                <spectrum name="diffuseReflectance" value="0.8, 0.1, 0.1"/>
                <float name="alpha" value="0.05"/>
            </bsdf> 

<!--        <subsurface type="fibershader">
            <boolean name="useRandomInteractionPoint" value="true"/>
            <boolean name="sampleInteractionPointFromCircumference" value="false"/>
            <fiberscat type="simpfabric5">
                <float name="kD" value="0"/>
                <spectrum name="colorD" value="0.99,0.99,0.99"/>
                <spectrum name="colorR" value="0.25,0.25,0.3"/>
                <float name="betaR" value="1.23799781194"/>
                <float name="betaTT" value="9.99999999999"/>
                <float name="gammaTT" value="25.9890848941"/>
                <spectrum name="colorTT" value="0.45,0.86,0.95"/>
                <float name="alpha" value="5"/>
            </fiberscat>
        </subsurface>  -->

        </shape>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="0.1" z="0.0"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="0.2" z="-0.1"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="0.3" z="0.0"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="0.4" z="-0.1"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="0.5" z="0.0"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="0.6" z="-0.1"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="0.7" z="0.0"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="0.8" z="-0.1"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="0.9" z="0.0"/>
        </transform>
    </shape>

    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="0.0" z="-0.1"/>
        </transform>
    </shape>

    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="-0.1" z="0.0"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="-0.2" z="-0.1"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="-0.3" z="0.0"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="-0.4" z="-0.1"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="-0.5" z="0.0"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="-0.6" z="-0.1"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="-0.7" z="0.0"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="-0.8" z="-0.1"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="horizontal"/>
        <transform name="toWorld">
            <translate x="-0.9" z="0.0"/>
        </transform>
    </shape>

<!-- ****************** vertical yarns *******************   -->
    <shape type="shapegroup" id="vertical">
        <shape type="hair">

            <string name="filename" value="$fn"/>
            
            <float name="radius" value="0.002"/>             
            <float name="angleThreshold" value="0.001"/>

            <bsdf type="roughplastic">
                <spectrum name="diffuseReflectance" value="0.1, 0.1, 0.8"/>
                <float name="alpha" value="0.05"/>
            </bsdf> 
        </shape>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="0.1" z="0.0"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="0.2" z="-0.1"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="0.3" z="0.0"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="0.4" z="-0.1"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="0.5" z="0.0"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="0.6" z="-0.1"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="0.7" z="0.0"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="0.8" z="-0.1"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="0.9" z="0.0"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>

    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="0.0" z="-0.1"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>

    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="-0.1" z="0.0"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="-0.2" z="-0.1"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="-0.3" z="0.0"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="-0.4" z="-0.1"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="-0.5" z="0.0"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="-0.6" z="-0.1"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="-0.7" z="0.0"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="-0.8" z="-0.1"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>
    <shape type="instance">
        <ref id="vertical"/>
        <transform name="toWorld">
            <translate x="-0.9" z="0.0"/>
            <rotate y="1" angle="-90"/>
        </transform>
    </shape>


    <shape type="rectangle">
        <transform name="toWorld">
            <rotate x="1" angle="-90"/>
            <scale x="100" z="100"/>
            <translate y="-0.75"/>
        </transform>
        <bsdf type="diffuse">
            <spectrum name="reflectance" value="0.4"/>
        </bsdf>
    </shape>

    <emitter type="constant">
         <spectrum name="radiance" value="0.1"/> 
    </emitter>    

    <shape type="sphere">
        <point name="center" x="10.0" y="50.0" z ="0.0"/>
        <float name="radius" value="10.0"/>
        <emitter type="area">
            <spectrum name="radiance" value="55"/>
        </emitter>
    </shape>

    <sensor type="perspective">
        <string name="fovAxis" value="smaller"/>
        <transform name="toWorld">
            <lookAt origin="-10 50 0" target="0 0 0" up="1 0.2 0"/>
        </transform>
        <float name="fov" value="2.2"/>

        <sampler type="ldsampler">
            <!-- <integer name="sampleCount" value="2048"/> -->
            <integer name="sampleCount" value="32"/>
        </sampler>
        <film id="film" type="hdrfilm">
            <integer name="width" value="512"/>
            <integer name="height" value="512"/>
            <rfilter type="gaussian"/>
            <boolean name="banner" value="false" />
        </film>
    </sensor>

</scene>

